{"ast":null,"code":"var _jsxFileName = \"E:\\\\CScourse\\\\\\u89C6\\u542C\\u89C9\\\\Sound-Quality-HCI\\\\src\\\\pages\\\\Denoise.js\",\n  _s = $RefreshSig$();\nimport { Link, Outlet, useLocation } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { useState } from \"react\";\nimport Tabs from \"@mui/material/Tabs\";\nimport Tab from \"@mui/material/Tab\";\nimport Box from \"@mui/material/Box\";\nimport Stack from \"@mui/material/Stack\";\nimport Button from \"@mui/material/Button\";\nimport SendIcon from \"@mui/icons-material/Send\";\nimport SoundDenoiseResult from \"../components/SoundDenoiseResult\";\nimport Typography from \"@mui/material/Typography\";\nimport WaveGraph from \"../components/WaveGraph\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Denoise(_ref) {\n  _s();\n  let {\n    uploadHandler,\n    audio,\n    clearAudio\n  } = _ref;\n  const location = useLocation();\n  const {\n    t\n  } = useTranslation(\"main\");\n  const [loading, setLoading] = useState(false);\n  const [result, setResult] = useState(null);\n  function onUpload() {\n    setLoading(true);\n    uploadHandler(audio).then(response => {\n      console.log(response);\n      setLoading(false);\n      setResult(response.data); //TODO: fill this\n    }, error => {\n      setLoading(false);\n      alert(\"error occurred uploading file\");\n      console.log(error);\n    });\n  }\n  let v = 0;\n  if (location.pathname.indexOf(\"record\") === -1) {\n    v = 1;\n  }\n  const [value, setValue] = useState(v);\n  function changeValue(event, newVal) {\n    clearAudio();\n    setValue(newVal);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      p: 2,\n      width: \"60%\",\n      m: \"0 auto\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h5\",\n      children: t(\"hints.denoiseTitle\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Tabs, {\n      value: value,\n      onChange: changeValue,\n      \"aria-label\": \"choose to upload or record sound\",\n      variant: \"fullWidth\",\n      children: [/*#__PURE__*/_jsxDEV(Tab, {\n        label: t(\"menu.record\"),\n        component: Link,\n        to: \"record\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Tab, {\n        label: t(\"menu.upload\"),\n        component: Link,\n        to: \"upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this), audio && /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignItems: \"center\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Stack, {\n        direction: \"row\",\n        alignItems: \"center\",\n        spacing: 2,\n        children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n          controls: true,\n          src: audio,\n          id: \"audio-element-dn1\",\n          style: {\n            display: \"none\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(WaveGraph, {\n          url: audio,\n          destination: \"denoise-1\",\n          source: \"#audio-element-dn1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        sx: {\n          mt: 2\n        },\n        onClick: onUpload,\n        endIcon: /*#__PURE__*/_jsxDEV(SendIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 32\n        }, this),\n        size: \"large\",\n        children: t(\"hints.denoiseButton\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }, this), (result || loading) && /*#__PURE__*/_jsxDEV(SoundDenoiseResult, {\n      data: result,\n      loading: loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 7\n  }, this);\n}\n_s(Denoise, \"ZAAHlXw8e5R+S7SvVaiFHFUPXL8=\", false, function () {\n  return [useLocation, useTranslation];\n});\n_c = Denoise;\nexport default Denoise;\nvar _c;\n$RefreshReg$(_c, \"Denoise\");","map":{"version":3,"names":["Link","Outlet","useLocation","useTranslation","useState","Tabs","Tab","Box","Stack","Button","SendIcon","SoundDenoiseResult","Typography","WaveGraph","jsxDEV","_jsxDEV","Denoise","_ref","_s","uploadHandler","audio","clearAudio","location","t","loading","setLoading","result","setResult","onUpload","then","response","console","log","data","error","alert","v","pathname","indexOf","value","setValue","changeValue","event","newVal","sx","p","width","m","children","variant","fileName","_jsxFileName","lineNumber","columnNumber","onChange","label","component","to","display","flexDirection","justifyContent","alignItems","direction","spacing","controls","src","id","style","url","destination","source","mt","onClick","endIcon","size","_c","$RefreshReg$"],"sources":["E:/CScourse/视听觉/Sound-Quality-HCI/src/pages/Denoise.js"],"sourcesContent":["import {Link, Outlet, useLocation} from \"react-router-dom\";\nimport {useTranslation} from \"react-i18next\";\nimport {useState} from \"react\";\nimport Tabs from \"@mui/material/Tabs\";\nimport Tab from \"@mui/material/Tab\";\nimport Box from \"@mui/material/Box\";\nimport Stack from \"@mui/material/Stack\";\nimport Button from \"@mui/material/Button\";\nimport SendIcon from \"@mui/icons-material/Send\";\nimport SoundDenoiseResult from \"../components/SoundDenoiseResult\";\nimport Typography from \"@mui/material/Typography\";\nimport WaveGraph from \"../components/WaveGraph\";\n\n\nfunction Denoise({uploadHandler, audio, clearAudio}) {\n  const location = useLocation();\n  const {t} = useTranslation(\"main\");\n  const [loading, setLoading] = useState(false);\n  const [result, setResult] = useState(null);\n\n  function onUpload() {\n    setLoading(true)\n    uploadHandler(audio).then(response => {\n      console.log(response)\n      setLoading(false)\n      setResult(response.data) //TODO: fill this\n    }, error => {\n      setLoading(false)\n      alert(\"error occurred uploading file\")\n      console.log(error)\n    })\n  }\n\n  let v = 0;\n  if (location.pathname.indexOf(\"record\") === -1) {\n    v = 1\n  }\n  const [value, setValue] = useState(v);\n\n  function changeValue(event, newVal) {\n    clearAudio()\n    setValue(newVal)\n  }\n\n  return (\n      <Box sx={{p: 2, width: \"60%\", m: \"0 auto\"}}>\n        <Typography variant={\"h5\"} >\n          {t(\"hints.denoiseTitle\")}\n        </Typography>\n        <Tabs\n            value={value}\n            onChange={changeValue}\n            aria-label=\"choose to upload or record sound\"\n            variant={\"fullWidth\"}\n        >\n          <Tab label={t(\"menu.record\")} component={Link} to={\"record\"}/>\n          <Tab label={t(\"menu.upload\")} component={Link} to={\"upload\"}/>\n        </Tabs>\n        <Outlet/>\n        {audio &&\n            (\n                <Box sx={{\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  justifyContent: \"center\",\n                  alignItems: \"center\"\n                }}>\n                  <Stack direction={\"row\"} alignItems=\"center\" spacing={2}>\n                    <audio controls src={audio} id={\"audio-element-dn1\"} style={{display: \"none\"}}/>\n                    <WaveGraph url={audio} destination={\"denoise-1\"} source={\"#audio-element-dn1\"}/>\n                  </Stack>\n\n                  <Button\n                      variant=\"outlined\"\n                      sx={{mt: 2}}\n                      onClick={onUpload}\n                      endIcon={<SendIcon/>}\n                      size={\"large\"}\n                  >\n                    {t(\"hints.denoiseButton\")}\n                  </Button>\n                </Box>\n            )\n        }\n        {(result || loading) &&\n            <SoundDenoiseResult data={result} loading={loading}/>\n        }\n      </Box>\n  )\n}\n\nexport default Denoise;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
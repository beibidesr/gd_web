{"ast":null,"code":"var _jsxFileName = \"E:\\\\CScourse\\\\\\u89C6\\u542C\\u89C9\\\\Sound-Quality-HCI\\\\src\\\\pages\\\\QualityAnalysis.js\",\n  _s = $RefreshSig$();\nimport Box from \"@mui/material/Box\";\nimport { useState } from \"react\";\nimport Tabs from \"@mui/material/Tabs\";\nimport { useTranslation } from \"react-i18next\";\nimport Tab from \"@mui/material/Tab\";\nimport { Link, Outlet, useLocation } from \"react-router-dom\";\nimport Button from \"@mui/material/Button\";\nimport SendIcon from '@mui/icons-material/Send';\nimport { AlgorithmSelection, initState } from \"../components/AlgorithmSelection\";\nimport { Stack } from \"@mui/material\";\nimport SoundQualityResult from \"../components/SoundQualityResult\";\nimport Typography from \"@mui/material/Typography\";\nimport WaveGraph from \"../components/WaveGraph\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction QualityAnalysis(_ref) {\n  _s();\n  let {\n    uploadHandler,\n    audio,\n    clearAudio\n  } = _ref;\n  const location = useLocation();\n  const {\n    t\n  } = useTranslation(\"main\");\n  const [algoList, setAlgoList] = useState(initState);\n  const [result, setResult] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const setAlgoCb = algo => {\n    setAlgoList(algo);\n  };\n  function onUpload() {\n    setLoading(true);\n    uploadHandler(audio, algoList).then(response => {\n      console.log(response);\n      setResult(response.data);\n      setLoading(false);\n    }, error => {\n      setLoading(false);\n      alert(\"error occurred uploading file\");\n      console.log(error);\n    });\n  }\n  let v = 0;\n  if (location.pathname.indexOf(\"record\") === -1) {\n    v = 1;\n  }\n  const [value, setValue] = useState(v);\n  function changeValue(event, newVal) {\n    clearAudio();\n    setValue(newVal);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      p: 2,\n      width: \"60%\",\n      m: \"0 auto\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h5\",\n      children: t(\"hints.qualityTitle\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Tabs, {\n      value: value,\n      onChange: changeValue,\n      \"aria-label\": \"choose to upload or record sound\",\n      variant: \"fullWidth\",\n      children: [/*#__PURE__*/_jsxDEV(Tab, {\n        label: t(\"menu.record\"),\n        component: Link,\n        to: \"record\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Tab, {\n        label: t(\"menu.upload\"),\n        component: Link,\n        to: \"upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this), audio && /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignItems: \"center\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Stack, {\n        direction: \"row\",\n        alignItems: \"center\",\n        spacing: 2,\n        children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n          controls: true,\n          src: audio,\n          id: \"audio-element-sqa\",\n          style: {\n            display: \"none\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(WaveGraph, {\n          url: audio,\n          destination: \"quality\",\n          source: \"#audio-element-sqa\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(AlgorithmSelection, {\n        callBack: setAlgoCb,\n        mode: value === 0 ? \"RECORD\" : \"UPLOAD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        sx: {\n          mt: 2\n        },\n        onClick: onUpload,\n        endIcon: /*#__PURE__*/_jsxDEV(SendIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 32\n        }, this),\n        size: \"large\",\n        children: t(\"hints.analysisButton\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }, this), (result || loading) && /*#__PURE__*/_jsxDEV(SoundQualityResult, {\n      data: result,\n      loading: loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 7\n  }, this);\n}\n_s(QualityAnalysis, \"KxCKXCBEgt+UWm1v+Dn/8EMxLi4=\", false, function () {\n  return [useLocation, useTranslation];\n});\n_c = QualityAnalysis;\nexport { QualityAnalysis };\nvar _c;\n$RefreshReg$(_c, \"QualityAnalysis\");","map":{"version":3,"names":["Box","useState","Tabs","useTranslation","Tab","Link","Outlet","useLocation","Button","SendIcon","AlgorithmSelection","initState","Stack","SoundQualityResult","Typography","WaveGraph","jsxDEV","_jsxDEV","QualityAnalysis","_ref","_s","uploadHandler","audio","clearAudio","location","t","algoList","setAlgoList","result","setResult","loading","setLoading","setAlgoCb","algo","onUpload","then","response","console","log","data","error","alert","v","pathname","indexOf","value","setValue","changeValue","event","newVal","sx","p","width","m","children","variant","fileName","_jsxFileName","lineNumber","columnNumber","onChange","label","component","to","display","flexDirection","justifyContent","alignItems","direction","spacing","controls","src","id","style","url","destination","source","callBack","mode","mt","onClick","endIcon","size","_c","$RefreshReg$"],"sources":["E:/CScourse/视听觉/Sound-Quality-HCI/src/pages/QualityAnalysis.js"],"sourcesContent":["import Box from \"@mui/material/Box\";\nimport {useState} from \"react\";\nimport Tabs from \"@mui/material/Tabs\";\nimport {useTranslation} from \"react-i18next\";\nimport Tab from \"@mui/material/Tab\";\nimport {Link, Outlet, useLocation} from \"react-router-dom\"\nimport Button from \"@mui/material/Button\";\nimport SendIcon from '@mui/icons-material/Send';\nimport {AlgorithmSelection, initState} from \"../components/AlgorithmSelection\";\nimport { Stack} from \"@mui/material\";\nimport SoundQualityResult from \"../components/SoundQualityResult\";\nimport Typography from \"@mui/material/Typography\";\nimport WaveGraph from \"../components/WaveGraph\";\n\n\nfunction QualityAnalysis({uploadHandler, audio, clearAudio}) {\n  const location = useLocation();\n  const {t} = useTranslation(\"main\");\n  const [algoList, setAlgoList] = useState(initState);\n  const [result, setResult] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const setAlgoCb = (algo) => {\n    setAlgoList(algo)\n  }\n\n  function onUpload() {\n    setLoading(true)\n    uploadHandler(audio, algoList).then(response => {\n      console.log(response)\n      setResult(response.data)\n      setLoading(false)\n    }, error => {\n      setLoading(false)\n      alert(\"error occurred uploading file\")\n      console.log(error)\n    })\n  }\n\n  let v = 0;\n  if (location.pathname.indexOf(\"record\") === -1) {\n    v = 1\n  }\n  const [value, setValue] = useState(v);\n\n  function changeValue(event, newVal) {\n    clearAudio()\n    setValue(newVal)\n  }\n\n  return (\n      <Box sx={{p: 2, width: \"60%\", m: \"0 auto\"}}>\n        <Typography variant={\"h5\"} >\n          {t(\"hints.qualityTitle\")}\n        </Typography>\n        <Tabs\n            value={value}\n            onChange={changeValue}\n            aria-label=\"choose to upload or record sound\"\n            variant={\"fullWidth\"}\n        >\n          <Tab label={t(\"menu.record\")} component={Link} to={\"record\"}/>\n          <Tab label={t(\"menu.upload\")} component={Link} to={\"upload\"}/>\n        </Tabs>\n        <Outlet/>\n\n        {audio &&\n            (\n                <Box sx={{\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  justifyContent: \"center\",\n                  alignItems: \"center\"\n                }}>\n                  <Stack direction={\"row\"} alignItems=\"center\" spacing={2}>\n                    <audio controls src={audio} id={\"audio-element-sqa\"} style={{display: \"none\"}} />\n                    <WaveGraph url={audio} destination={\"quality\"} source={\"#audio-element-sqa\"}/>\n                  </Stack>\n                  <AlgorithmSelection callBack={setAlgoCb} mode={value===0 ? \"RECORD\" : \"UPLOAD\"}/>\n                  <Button\n                      variant=\"outlined\"\n                      sx={{mt: 2}}\n                      onClick={onUpload}\n                      endIcon={<SendIcon/>}\n                      size={\"large\"}\n                  >\n                    {t(\"hints.analysisButton\")}\n                  </Button>\n                </Box>\n            )\n        }\n\n        {(result || loading) &&\n            <SoundQualityResult data={result} loading={loading}/>\n        }\n      </Box>\n  )\n}\n\nexport {QualityAnalysis};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}